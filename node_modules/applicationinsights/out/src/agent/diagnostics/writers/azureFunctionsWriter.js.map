{"version":3,"file":"azureFunctionsWriter.js","sourceRoot":"","sources":["../../../../../src/agent/diagnostics/writers/azureFunctionsWriter.ts"],"names":[],"mappings":";AAAA,uCAAuC;AACvC,kCAAkC;;;AAElC,0CAA4E;AAC5E,uCAA2D;AAE3D,MAAM,iCAAiC,GAAG,sDAAsD,CAAC;AAEjG,MAAa,oBAAoB;IAK7B,YAAY,kBAA0B;QAClC,IAAI,CAAC,mBAAmB,GAAG,kBAAkB,CAAC;QAC9C,IAAI,CAAC,QAAQ,GAAG,sBAAc,CAAC;QAC/B,IAAI,CAAC,aAAa,GAAG,kDAA0C,CAAC;IACpE,CAAC;IAEM,GAAG,CAAC,GAAQ;QACf,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC;IAC3C,CAAC;IAEM,KAAK,CAAC,GAAQ;QACjB,OAAO,CAAC,KAAK,CAAC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC,CAAC;IAC5C,CAAC;IAEO,cAAc,CAAC,GAAQ;QAC3B,MAAM,MAAM,GAAG,GAAG,iCAAiC,IAAI,GAAG,CAAC,IAAI,IAAI,GAAG,CAAC,KAAK,IAAI,GAAG,CAAC,MAAM,MAAM,GAAG,CAAC,OAAO,MAAM,IAAI,CAAC,QAAQ,IAAI,IAAI,CAAC,mBAAmB,IAAI,IAAI,CAAC,aAAa,UAAU,CAAC;QAC3L,OAAO,MAAM,CAAC;IAClB,CAAC;CACJ;AAvBD,oDAuBC","sourcesContent":["// Copyright (c) Microsoft Corporation.\r\n// Licensed under the MIT license.\r\n\r\nimport { APPLICATION_INSIGHTS_OPENTELEMETRY_VERSION } from \"../../../types\";\r\nimport { AZURE_APP_NAME, IAgentLogger } from \"../../types\";\r\n\r\nconst AZURE_FUNCTIONS_DIAGNOSTIC_PREFIX = \"LanguageWorkerConsoleLogMS_APPLICATION_INSIGHTS_LOGS\";\r\n\r\nexport class AzureFunctionsWriter implements IAgentLogger {\r\n    private _appName: string;\r\n    private _instrumentationKey: string;\r\n    private _agentVersion: string;\r\n\r\n    constructor(instrumentationKey: string) {\r\n        this._instrumentationKey = instrumentationKey;\r\n        this._appName = AZURE_APP_NAME;\r\n        this._agentVersion = APPLICATION_INSIGHTS_OPENTELEMETRY_VERSION;\r\n    }\r\n\r\n    public log(log: any) {\r\n        console.info(this._getAzureFnLog(log));\r\n    }\r\n\r\n    public error(log: any) {\r\n        console.error(this._getAzureFnLog(log));\r\n    }\r\n\r\n    private _getAzureFnLog(log: any): string {\r\n        const output = `${AZURE_FUNCTIONS_DIAGNOSTIC_PREFIX} ${log.time},${log.level},${log.logger},\\\"${log.message}\\\",${this._appName},${this._instrumentationKey},${this._agentVersion},node.js`;\r\n        return output;\r\n    }\r\n}\r\n"]}