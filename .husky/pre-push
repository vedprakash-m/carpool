#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

echo "ğŸš€ Running pre-push validation..."

# Check if Docker is available
if docker info >/dev/null 2>&1; then
    echo "ğŸ³ Docker available - running full E2E validation..."
    npm run validate:e2e || {
        echo "âŒ E2E validation failed"
        exit 1
    }
else
    echo "âš ï¸  Docker not available - running comprehensive local validation instead..."
    echo "ğŸ“ Note: E2E tests will run in CI pipeline"
    npm run validate:local || {
        echo "âŒ Local validation failed"
        exit 1
    }
fi

echo "âœ… Pre-push validation passed!"
